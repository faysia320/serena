services:
  serena:
    build:
      context: .
      dockerfile: Dockerfile

    container_name: serena-mcp

    ports:
      - "9121:9121" # MCP server
      - "24282:24282" # Web dashboard

    environment:
      - SERENA_DOCKER=1

    # ðŸ”‘ í•µì‹¬: ëª¨ë“  í”„ë¡œì íŠ¸ + ì„¤ì • ì˜ì†í™”
    volumes:
      # ëª¨ë“  í”„ë¡œì íŠ¸ (ëŒ€ì†Œë¬¸ìž ê²½ë¡œ ëª¨ë‘ ë§ˆìš´íŠ¸)
      - "C:/workspace/repos:/workspace"
      - "C:/WorkSpace/repos:/WorkSpace"

      # Serena ì„¤ì •/ë¡œê·¸ ì˜ì†í™” (ê¶Œìž¥)
      - "C:/WorkSpace/repos/serena/config:/workspaces/serena/config"

    command:
      - >
        uv run --directory .
        serena-mcp-server
        --transport sse
        --port 9121
        --host 0.0.0.0
        --context claude-code
